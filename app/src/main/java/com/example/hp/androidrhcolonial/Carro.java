package com.example.hp.androidrhcolonial;import android.content.DialogInterface;import android.support.v7.app.AlertDialog;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.support.v7.widget.LinearLayoutManager;import android.support.v7.widget.RecyclerView;import android.view.View;import android.widget.EditText;import android.widget.LinearLayout;import android.widget.TextView;import android.widget.Toast;import com.example.hp.androidrhcolonial.Comun.Comun;import com.example.hp.androidrhcolonial.Database.Database;import com.example.hp.androidrhcolonial.MenuVH.CarroAdaptador;import com.example.hp.androidrhcolonial.Model.Orden;import com.example.hp.androidrhcolonial.Model.Solicitud;import com.google.firebase.database.DatabaseReference;import com.google.firebase.database.FirebaseDatabase;import java.text.NumberFormat;import java.util.ArrayList;import java.util.List;import java.util.Locale;import info.hoang8f.widget.FButton;public class Carro extends AppCompatActivity {RecyclerView vistarRecicladora;RecyclerView.LayoutManager layoutmananager;FirebaseDatabase db;DatabaseReference solicitudes;TextView txtTotalPrecio;FButton btnColocar;List<Orden>carro=new ArrayList<>();CarroAdaptador adaptador;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_carro);        //  firebase        db=FirebaseDatabase.getInstance();        solicitudes=db.getReference("Solicitudes");        vistarRecicladora=(RecyclerView)findViewById(R.id.listaCarro) ;        vistarRecicladora.setHasFixedSize(true);layoutmananager=new LinearLayoutManager(this);        vistarRecicladora.setLayoutManager(layoutmananager);        txtTotalPrecio=(TextView)findViewById(R.id.total);        btnColocar=(FButton)findViewById(R.id.btnColocarOrden);        cargarListaComida();    }    private void cargarListaComida() {        carro=new Database (this).getCarts();        adaptador=new CarroAdaptador(carro,this);        vistarRecicladora.setAdapter(adaptador);        //Calcular precio total        int total=0;        for(Orden orden:carro){            Locale locale=new Locale ("en","US");            total+=(Integer.parseInt(orden.getPrecio()))*(Integer.parseInt(orden.getCantidad()));            NumberFormat formato=NumberFormat.getCurrencyInstance(locale);            txtTotalPrecio.setText(formato.format(total));            btnColocar.setOnClickListener(new View.OnClickListener() {                @Override                public void onClick(View view) {                    showAlertDialog();                }            });    }}    private void showAlertDialog() {        AlertDialog.Builder alertadialogo=new AlertDialog.Builder(Carro.this);        alertadialogo.setTitle("ordenar");        alertadialogo.setMessage("Ingresa tu direccion o mesa");        final EditText editarDireecion= new EditText(Carro.this);        LinearLayout.LayoutParams ip=new LinearLayout.LayoutParams(                LinearLayout.LayoutParams.MATCH_PARENT,LinearLayout.LayoutParams.MATCH_PARENT);        editarDireecion.setLayoutParams(ip);        alertadialogo.setView(editarDireecion);        alertadialogo.setPositiveButton("Si", new DialogInterface.OnClickListener() {            @Override            public void onClick(DialogInterface dialogInterface, int i) {                Solicitud solicitud=new Solicitud(Comun.usuarioActual.getTelefono(),                        Comun.usuarioActual.getNombre(),                        editarDireecion.getText().toString(),txtTotalPrecio.getText().toString(),                        carro);                //subir datos a firebase                solicitudes.child(String.valueOf(System.currentTimeMillis())).setValue(solicitud);                // borrar carro                new Database(getBaseContext()).limpiarCarro();                Toast.makeText(Carro.this,"Gracias por ordenar",Toast.LENGTH_SHORT).show();            }        });        alertadialogo.setNegativeButton("No", new DialogInterface.OnClickListener() {            @Override            public void onClick(DialogInterface dialogInterface, int i) {                dialogInterface.dismiss();            }        });        alertadialogo.show();    }}